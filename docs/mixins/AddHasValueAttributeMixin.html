<!DOCTYPE html>


<html>
<head>
  <title>AddHasValueAttributeMixin</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="../tpe.css" />
</head>
<body>
  <div class="container">
      <div class="header">
        <div class="topbar">
          <div id="logo" alt="TPE">
          </div>
          <h3>AddHasValueAttributeMixin</h3>
          <!-- <img id="logo" src="/images/TPE_logo_white.png" height="60px" alt="TPE" > -->
          <div class="links">
            <a href="https://github.com/mobily-enterprises/tpe" target="_blank" title="View on GitHub">
              <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
            </a>
          </div>
        </div>
        AddHasValueAttributeMixin
      </div>
      <div class="main">
        
          <div class="toc">
            <ul>
              
                
                
                  <li>
                      <a class="source " href="../index.html">
                          index
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source " href="../quickstart-designers.html">
                          quickstart designers
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source " href="../tutorials-designers.html">
                          tutorials designers
                      </a>
                  </li>
                
              
                
                
              
                
                
              
                
                
                  <li>
                      <a class="source " href="../quickstart-developers.html">
                          quickstart developers
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source " href="../tutorials-developers.html">
                          tutorials developers
                      </a>
                  </li>
                
              
                
                
              
                
                
                  <li>
                      <a class="source " href="../elements.html">
                          elements
                      </a>
                  </li>
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
                  <li>
                      <a class="source  current " href="../mixins.html">
                          mixins
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented  current " href="AddHasValueAttributeMixin.html">
                          AddHasValueAttributeMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="DraggableElementMixin.html">
                          DraggableElementMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="DraggableListMixin.html">
                          DraggableListMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="FormElementMixin.html">
                          FormElementMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="InputMixin.html">
                          InputMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="LabelsMixin.html">
                          LabelsMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="NativeReflectorMixin.html">
                          NativeReflectorMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="NativeValidatorMixin.html">
                          NativeValidatorMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="StyleableMixin.html">
                          StyleableMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="SyntheticValidatorMixin.html">
                          SyntheticValidatorMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source  indented " href="ThemeableMixin.html">
                          ThemeableMixin.js
                      </a>
                  </li>
                
              
                
                
                  <li>
                      <a class="source " href="../appendices.html">
                          appendices
                      </a>
                  </li>
                
              
                
                
              
                
                
                  <li>
                      <a class="source " href="../material-theme.html">
                          material theme
                      </a>
                  </li>
                
              
            </ul>
          </div>
        
        <div class="contentPage">
          
            
            <p>In some cases, elements will experience some change in state, like the value
in an input field or focus, and it would be convenient to have styling
applied to the element, providing user feedback. Standard CSS can deal with
that automatically by using pseudo classes like :focus and :placeholder-hown.
However, there are a few limitations:</p>
<ul>
<li>varying browser support for some of those features</li>
<li>CSS doesn’t provide a way to selcet “up”, meaning we can’t have a rule that
target an element for which a child has a state or class</li>
</ul>
<p>Because TPE aims to reflect the native elements behavior, we need some way to
make state changes in an input apparent in the wrapper element.
Unfortunately, there’s no native way to use observers to track those states.
So, this Mixin provides a way of updating a boolean attribute to reflect
changes that need to be considered in the wrapper element. There ate two
cases implemented currently, <code>has-focus</code> and <code>has-value</code>.</p>

            
              <div class='highlight'><pre><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">AddHasValueAttributeMixin</span> = (<span class="hljs-params">base</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">base</span> {
    _observeInput (e) {
      <span class="hljs-keyword">const</span> target = e.<span class="hljs-property">currentTarget</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleAttribute</span>(<span class="hljs-string">&#x27;has-value&#x27;</span>, <span class="hljs-title function_">__hasValue</span>(target.<span class="hljs-property">value</span>))
    }

    _observeFocus (e) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleAttribute</span>(<span class="hljs-string">&#x27;has-focus&#x27;</span>, <span class="hljs-literal">true</span>)
    }

    _observeBlur (e) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleAttribute</span>(<span class="hljs-string">&#x27;has-focus&#x27;</span>, <span class="hljs-literal">false</span>)
    }

    afterSettingProperty (prop, newValue) {
      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">afterSettingProperty</span>()

      <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">&#x27;value&#x27;</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleAttribute</span>(<span class="hljs-string">&#x27;has-value&#x27;</span>, <span class="hljs-title function_">__hasValue</span>(newValue))
      }
    }

    firstUpdated () {
      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">firstUpdated</span>()

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">native</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;input&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_observeInput</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>))
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">native</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_observeFocus</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>))
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">native</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;blur&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_observeBlur</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>))

      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleAttribute</span>(<span class="hljs-string">&#x27;has-value&#x27;</span>, <span class="hljs-title function_">__hasValue</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>))
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">__hasValue</span> (v) {
  <span class="hljs-keyword">return</span> v !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; v !== <span class="hljs-string">&#x27;null&#x27;</span> &amp;&amp; v !== <span class="hljs-string">&#x27;&#x27;</span>
}</pre></div>
            
          
        </div>
      </div>
    </div>
    <div class="bottombar">

    </div>
  </div>
</body>
</html>
